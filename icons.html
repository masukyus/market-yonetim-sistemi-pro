<!DOCTYPE html>
<html lang="tr">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>PWA Icon Generator</title>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, sans-serif;
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            min-height: 100vh;
            display: flex;
            align-items: center;
            justify-content: center;
            padding: 2rem;
        }

        .container {
            background: white;
            border-radius: 20px;
            padding: 3rem;
            max-width: 800px;
            width: 100%;
            box-shadow: 0 20px 60px rgba(0,0,0,0.3);
        }

        h1 {
            color: #6366f1;
            margin-bottom: 1rem;
            text-align: center;
        }

        .description {
            text-align: center;
            color: #666;
            margin-bottom: 2rem;
        }

        .controls {
            display: grid;
            gap: 1.5rem;
            margin-bottom: 2rem;
        }

        .control-group {
            display: flex;
            flex-direction: column;
            gap: 0.5rem;
        }

        label {
            font-weight: 600;
            color: #333;
        }

        input, select {
            padding: 0.75rem;
            border: 2px solid #e5e7eb;
            border-radius: 8px;
            font-size: 1rem;
        }

        input:focus, select:focus {
            outline: none;
            border-color: #6366f1;
        }

        .emoji-picker {
            display: grid;
            grid-template-columns: repeat(auto-fill, minmax(60px, 1fr));
            gap: 0.5rem;
            padding: 1rem;
            background: #f9fafb;
            border-radius: 8px;
            max-height: 200px;
            overflow-y: auto;
        }

        .emoji-btn {
            padding: 1rem;
            font-size: 2rem;
            background: white;
            border: 2px solid #e5e7eb;
            border-radius: 8px;
            cursor: pointer;
            transition: all 0.2s;
        }

        .emoji-btn:hover {
            border-color: #6366f1;
            transform: scale(1.1);
        }

        .emoji-btn.active {
            border-color: #6366f1;
            background: #eef2ff;
        }

        .preview {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(100px, 1fr));
            gap: 1rem;
            padding: 1.5rem;
            background: #f9fafb;
            border-radius: 12px;
            margin-bottom: 2rem;
        }

        .preview-item {
            display: flex;
            flex-direction: column;
            align-items: center;
            gap: 0.5rem;
        }

        .preview-icon {
            background: white;
            border-radius: 12px;
            box-shadow: 0 2px 8px rgba(0,0,0,0.1);
            display: flex;
            align-items: center;
            justify-content: center;
        }

        .preview-label {
            font-size: 0.75rem;
            color: #666;
            font-weight: 600;
        }

        .btn {
            padding: 1rem 2rem;
            background: #6366f1;
            color: white;
            border: none;
            border-radius: 12px;
            font-weight: 600;
            font-size: 1rem;
            cursor: pointer;
            transition: all 0.2s;
            width: 100%;
        }

        .btn:hover {
            background: #4f46e5;
            transform: translateY(-2px);
            box-shadow: 0 4px 12px rgba(99, 102, 241, 0.4);
        }

        .btn:active {
            transform: translateY(0);
        }

        .success-message {
            background: #10b981;
            color: white;
            padding: 1rem;
            border-radius: 8px;
            text-align: center;
            margin-top: 1rem;
            display: none;
        }

        .success-message.show {
            display: block;
        }

        canvas {
            display: none;
        }
    </style>
</head>
<body>
    <div class="container">
        <h1>üì¶ PWA Icon Generator</h1>
        <p class="description">Market Stok Y√∂netimi i√ßin icon'larƒ±nƒ±zƒ± olu≈üturun</p>

        <div class="controls">
            <div class="control-group">
                <label>üé® Arka Plan Rengi</label>
                <input type="color" id="bgColor" value="#6366f1">
            </div>

            <div class="control-group">
                <label>üìù Metin veya Emoji Se√ßin</label>
                <input type="text" id="iconText" placeholder="üì¶ veya metin girin" maxlength="2">
            </div>

            <div class="control-group">
                <label>üòÄ Pop√ºler Emoji'ler</label>
                <div class="emoji-picker" id="emojiPicker"></div>
            </div>

            <div class="control-group">
                <label>üéØ Icon Stili</label>
                <select id="iconStyle">
                    <option value="rounded">Yuvarlatƒ±lmƒ±≈ü K√∂≈üeler</option>
                    <option value="circle">Daire</option>
                    <option value="square">Kare</option>
                </select>
            </div>
        </div>

        <div class="preview" id="preview">
            <!-- Icons will be rendered here -->
        </div>

        <button class="btn" onclick="generateAndDownload()">
            ‚¨áÔ∏è T√ºm Icon'larƒ± ƒ∞ndir (ZIP)
        </button>

        <div class="success-message" id="successMessage">
            ‚úÖ Icon'lar ba≈üarƒ±yla olu≈üturuldu ve indirildi!
        </div>

        <canvas id="canvas"></canvas>
    </div>

    <!-- JSZip library for creating ZIP file -->
    <script src="https://cdnjs.cloudflare.com/ajax/libs/jszip/3.10.1/jszip.min.js"></script>

    <script>
        // Pop√ºler emojiler
        const popularEmojis = ['üì¶', 'üè™', 'üõí', 'üìä', 'üíº', 'üè∑Ô∏è', 'üì±', 'üçé', 'ü•õ', 'ü•¨', 'üçû', 'ü•©', 'üßä', 'üßÉ', 'üç™', 'üßπ'];

        const sizes = [72, 96, 128, 144, 152, 192, 384, 512];
        
        let currentSettings = {
            bgColor: '#6366f1',
            text: 'üì¶',
            style: 'rounded'
        };

        // Initialize
        function init() {
            renderEmojiPicker();
            updatePreview();
            setupEventListeners();
        }

        // Render emoji picker
        function renderEmojiPicker() {
            const picker = document.getElementById('emojiPicker');
            picker.innerHTML = popularEmojis.map(emoji => 
                `<button class="emoji-btn" onclick="selectEmoji('${emoji}')">${emoji}</button>`
            ).join('');
        }

        // Select emoji
        function selectEmoji(emoji) {
            document.getElementById('iconText').value = emoji;
            currentSettings.text = emoji;
            updatePreview();
            
            // Update active state
            document.querySelectorAll('.emoji-btn').forEach(btn => {
                btn.classList.toggle('active', btn.textContent === emoji);
            });
        }

        // Setup event listeners
        function setupEventListeners() {
            document.getElementById('bgColor').addEventListener('input', (e) => {
                currentSettings.bgColor = e.target.value;
                updatePreview();
            });

            document.getElementById('iconText').addEventListener('input', (e) => {
                currentSettings.text = e.target.value || 'üì¶';
                updatePreview();
            });

            document.getElementById('iconStyle').addEventListener('change', (e) => {
                currentSettings.style = e.target.value;
                updatePreview();
            });
        }

        // Update preview
        function updatePreview() {
            const preview = document.getElementById('preview');
            preview.innerHTML = sizes.map(size => {
                const dataUrl = generateIcon(size);
                return `
                    <div class="preview-item">
                        <img src="${dataUrl}" 
                             class="preview-icon" 
                             width="${Math.min(size, 96)}" 
                             height="${Math.min(size, 96)}"
                             style="width: ${Math.min(size, 96)}px; height: ${Math.min(size, 96)}px;">
                        <span class="preview-label">${size}x${size}</span>
                    </div>
                `;
            }).join('');
        }

        // Generate single icon
        function generateIcon(size) {
            const canvas = document.getElementById('canvas');
            const ctx = canvas.getContext('2d');
            
            canvas.width = size;
            canvas.height = size;

            // Background
            ctx.fillStyle = currentSettings.bgColor;
            
            if (currentSettings.style === 'circle') {
                ctx.beginPath();
                ctx.arc(size / 2, size / 2, size / 2, 0, Math.PI * 2);
                ctx.fill();
            } else if (currentSettings.style === 'rounded') {
                const radius = size * 0.15;
                ctx.beginPath();
                ctx.moveTo(radius, 0);
                ctx.lineTo(size - radius, 0);
                ctx.quadraticCurveTo(size, 0, size, radius);
                ctx.lineTo(size, size - radius);
                ctx.quadraticCurveTo(size, size, size - radius, size);
                ctx.lineTo(radius, size);
                ctx.quadraticCurveTo(0, size, 0, size - radius);
                ctx.lineTo(0, radius);
                ctx.quadraticCurveTo(0, 0, radius, 0);
                ctx.fill();
            } else {
                ctx.fillRect(0, 0, size, size);
            }

            // Text/Emoji
            ctx.fillStyle = 'white';
            ctx.textAlign = 'center';
            ctx.textBaseline = 'middle';
            
            // Check if emoji or text
            const isEmoji = /\p{Emoji}/u.test(currentSettings.text);
            
            if (isEmoji) {
                ctx.font = `${size * 0.5}px Arial`;
            } else {
                ctx.font = `bold ${size * 0.4}px Arial`;
            }
            
            ctx.fillText(currentSettings.text, size / 2, size / 2);

            return canvas.toDataURL('image/png');
        }

        // Generate and download all icons
        async function generateAndDownload() {
            const zip = new JSZip();
            const iconsFolder = zip.folder('icons');

            // Generate all sizes
            for (const size of sizes) {
                const dataUrl = generateIcon(size);
                const base64Data = dataUrl.split(',')[1];
                iconsFolder.file(`icon-${size}.png`, base64Data, { base64: true });
            }

            // Generate maskable icon (512px with safe area)
            const maskableDataUrl = generateMaskableIcon();
            const maskableBase64 = maskableDataUrl.split(',')[1];
            iconsFolder.file('icon-512-maskable.png', maskableBase64, { base64: true });

            // Create README
            const readmeContent = `# PWA Icons
            
Generated icons for Market Stok Y√∂netimi PWA

## Sizes
${sizes.map(s => `- icon-${s}.png (${s}x${s}px)`).join('\n')}
- icon-512-maskable.png (512x512px, safe area)

## Installation
1. Copy all PNG files to your project's /icons/ folder
2. Update manifest.json icon paths if needed
3. Verify icons in browser DevTools ‚Üí Application ‚Üí Manifest

## Settings Used
- Background Color: ${currentSettings.bgColor}
- Icon: ${currentSettings.text}
- Style: ${currentSettings.style}
`;
            zip.file('README.txt', readmeContent);

            // Generate and download ZIP
            const blob = await zip.generateAsync({ type: 'blob' });
            const url = URL.createObjectURL(blob);
            const a = document.createElement('a');
            a.href = url;
            a.download = 'pwa-icons.zip';
            a.click();
            URL.revokeObjectURL(url);

            // Show success message
            const msg = document.getElementById('successMessage');
            msg.classList.add('show');
            setTimeout(() => msg.classList.remove('show'), 3000);
        }

        // Generate maskable icon with safe area
        function generateMaskableIcon() {
            const size = 512;
            const safeArea = size * 0.8; // 80% safe area
            const padding = (size - safeArea) / 2;
            
            const canvas = document.getElementById('canvas');
            const ctx = canvas.getContext('2d');
            
            canvas.width = size;
            canvas.height = size;

            // Full background
            ctx.fillStyle = currentSettings.bgColor;
            ctx.fillRect(0, 0, size, size);

            // Text/Emoji in safe area
            ctx.fillStyle = 'white';
            ctx.textAlign = 'center';
            ctx.textBaseline = 'middle';
            
            const isEmoji = /\p{Emoji}/u.test(currentSettings.text);
            ctx.font = isEmoji ? `${safeArea * 0.5}px Arial` : `bold ${safeArea * 0.4}px Arial`;
            ctx.fillText(currentSettings.text, size / 2, size / 2);

            return canvas.toDataURL('image/png');
        }

        // Initialize on load
        init();
    </script>
</body>
</html>